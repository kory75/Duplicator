#:kivy 1.0.9
#:import SwapTransition kivy.uix.screenmanager.SwapTransition

[MenuBar@BoxLayout]:
	orientation: 'vertical'
	size_hint: .20,1
	padding:10
	spacing:5
	Button:
		size_hint: 1,.25
	    pos_hint:{'top': 1}
	    background_normal: 'img/Menu-Button.png'
	    background_down: 'img/Menu-Button-Down.png'
		on_press: app.switchtoscreen('menu')
	
	Label: 
		text: 'Duplicator V0.1'
		size_hint: 1,.55
				
	Button:			
		size_hint: 1,.20
		on_press: app.stop()
		background_normal: 'img/Exit-Button.png'
		background_down: 'img/Exit-Button-Down.png'    
		   
<MenuScreen>:    
    BoxLayout:
    	size: root.size
        pos: root.pos
    	orientation: 'horizontal'
		StackLayout:
			size_hint: .80,1
			spacing:2
			padding:2
			Button:
		        background_normal: 'img/Menu-Printer-Button.png'
		        background_down: 'img/Menu-Printer-Button-Down.png'
		        size_hint: .33, .33
		        on_press: app.switchtoscreen('print')
				
		    Button:
		        background_normal: 'img/Menu-Scanner-Button.png'
		        background_down: 'img/Menu-Scanner-Button-Down.png'
		        size_hint: .33, .33
		        on_press: app.switchtoscreen('scan') 
		        	
		        
		    Button:
		        background_normal: 'img/Menu-File-Button.png'
		        background_down: 'img/Menu-File-Button-Down.png'
		        size_hint: .33, .33
		        on_press: app.switchtoscreen('file') 
			        
			Button:
		        background_normal: 'img/Menu-Controll-Button.png'
		        background_down: 'img/Menu-Controll-Button-Down.png'
		        size_hint: .33, .33  
		        on_press: app.switchtoscreen('controll') 
		       
			Button:
		        background_normal: 'img/Menu-Model-Button.png'
		        background_down: 'img/Menu-Model-Button-Down.png'
		        size_hint: .33, .33  
		        on_press: app.switchtoscreen('model')     
		    
		        
		    Button: 
		        size_hint: .33, .33  
		        background_normal: 'img/Menu-View-Button.png'
		        background_down: 'img/Menu-View-Button-Down.png'
		        on_press: app.switchtoscreen('view')   
		        
		        
		MenuBar:
			
		        
<PrintScreen>:
	BoxLayout:
    	size: root.size
        pos: root.pos
    	orientation: 'horizontal'
		
		BoxLayout:
			orientation: 'horizontal'
			size_hint: .80,1
		
			Accordion:
				collapse: 1
				orientation: 'vertical'
				AccordionItem:
					title: 'Files'
						
					BoxLayout:
						orientation: 'vertical'
						size_hint: .80,1
					
						FileChooserIconView:
				            id: print_filechooser
							size_hint:1,.80
							
						StackLayout:
							orientation:'lr-tb'
							size_hint:1,.20
										
							Button:
								text: 'Print'
								size_hint:1,1
				
				AccordionItem:
					collapse: 0
					title: 'Controll'
					
					#Manual controll
					BoxLayout:
						orientation: 'vertical'
						size_hint: .80,1
						
						#XYZ
						BoxLayout:
							orientation: 'horizontal'
							size_hint: 1,.70
						
							#stepsize
							BoxLayout:
								orientation: 'vertical'
								size_hint: .19,1
								
								ToggleButton:
									text: '100mm'
									size_hint:1,.25
									group: 'stepSize'
								ToggleButton:
									text: '10mm'
									size_hint:1,.25
									group: 'stepSize'
								ToggleButton:
									text: '1mm'
									size_hint:1,.25
									group: 'stepSize'
								ToggleButton:
									text: '0.1mm'
									size_hint:1,.25
									group: 'stepSize'
						
						    #X
							BoxLayout:
								orientation: 'vertical'
								size_hint: .28,1
								
								Button:
									text: '+X'
									size_hint:1,.33
								Button:
									text: 'X Home'
									size_hint:1,.33
									on_press: app.homeX()
								Button:
									text: '-X'
									size_hint:1,.33
							#Y
							BoxLayout:
								orientation: 'vertical'
								size_hint: .28,1
								
								Button:
									text: '+Y'
									size_hint:1,.33
								Button:
									text: 'Y Home'
									size_hint:1,.33
									on_press: app.homeY()
								Button:
									text: '-Y'
									size_hint:1,.33
							#Z
							BoxLayout:
								orientation: 'vertical'
								size_hint: .28,1
								
								Button:
									text: '+Z'
									size_hint:1,.33
								Button:
									text: 'Z Home'
									size_hint:1,.33
									on_press: app.homeZ()
								Button:
									text: '-Z'
									size_hint:1,.33
						#home and heater	
						BoxLayout:
							orientation: 'horizontal'
							size_hint: 1,.1
							
							Label:
								text: 'Heater 235C'
								size_hint:.33,1
							Switch:
								active: 1
								size_hint:.33,1
							Button:
								text: 'Home All'
								size_hint:.33,1
								on_press: app.homeprinter()
						#Extruders	
						BoxLayout:
							orientation: 'vertical'
							size_hint: 1,.20
							
							BoxLayout:
								orientation: 'horizontal'
								size_hint: 1,.5
							
								Button:
									text: '-E 1'
									size_hint:.25,1
								Label:
									text: '235C'
									size_hint:.25,1
								Switch:
									active: 0
									text: 'Extruder On'
									size_hint:.25,1
								Button:
									text: '+E 1'
									size_hint:.25,1
					
							BoxLayout:
								orientation: 'horizontal'
								size_hint: 1,.5
							
								Button:
									text: '-E 2'
									size_hint:.25,1
								Label:
									text: '235C'
									size_hint:.25,1
								Switch:
									active: 0
									text: 'Extruder On'
									size_hint:.25,1
								Button:
									text: '+E 2'
									size_hint:.25,1
							

					
					#Controlls
					BoxLayout:
						orientation: 'vertical'
						size_hint: .20,1

						Label:
							text: 'Connect'
							size_hint:1,.1
						Switch:
							id:connectprinterswitch
							active: 0
							size_hint:1,.1
							on_active: app.connectprinter(self.active)
						Label:
							text: 'Preheat'
							size_hint:1,.1
						Switch:
							active: 1
							size_hint:1,.1
						Button:
							text: 'Motors off'
							size_hint:1,.2
						Button:
							text: 'Emergency Stop'
							size_hint:1,.2
						Button:
							text: 'Pause'
							size_hint:1,.2
		MenuBar:
	        

<ScanScreen>:
	BoxLayout:
    	size: root.size
        pos: root.pos
    	orientation: 'horizontal'
		
		BoxLayout:
			orientation: 'horizontal'
			size_hint: .80,1
		
			StackLayout:
				id:scancamera
				orientation:'tb-lr'
				Camera:
					id:scan_camera
					size_hint:1,.66
					
					
					
					
				Button:
					text:'Scan'	
					size_hint:1,.33
							
				
			StackLayout:
				orientation:'tb-lr'
				size_hint:.33,1
				Button:
					text:'Init'
					size_hint: 1,.20
					on_press:
						scan_camera.play=True
						scan_camera.resolution=(640, 480)
						scan_camera.index=0
					
				Button:
					text:'Laser'
					size_hint: 1,.20
					
				Label:
					text: 'Filename.scan'
					size_hint: 1,.20
					
				Button:
					text:'slice'
					size_hint: 1,.20
					
				Button:
					text:'upload'
					size_hint: 1,.20
					
				
		
		MenuBar:    
		
<FileScreen>:
	BoxLayout:
    	size: root.size
        pos: root.pos
    	orientation: 'horizontal'
		
		BoxLayout:
			orientation: 'horizontal'
			size_hint: .80,1
		
			FileChooserIconView:
	            id: file_filechooser
				size_hint:.66,1
		
			StackLayout:
				orientation:'tb-lr'
				size_hint:.33,1
			
				Button:
					text: 'Print'
					size_hint:1,.33
					
				Button:
					text: 'Upload'
					size_hint:1,.33
					
				Button:
					text: 'Slice'
					size_hint:1,.33
		
		MenuBar:   
		
<ControllScreen>:
	BoxLayout:
    	size: root.size
        pos: root.pos
    	orientation: 'horizontal'
		
		
		BoxLayout:
			orientation: 'horizontal'
			size_hint: .80,1
			
			
			Button:
				id:heater_switch1
				text: '26C'
				background_normal: 'img/Controll/Heater-Button-Off.png'
				background_down: 'img/Controll/Heater-Button-Off.png'					
					
		
		MenuBar:
		
<ModelScreen>:
	BoxLayout:
    	size: root.size
        pos: root.pos
    	orientation: 'horizontal'
		
		BoxLayout:
			orientation: 'horizontal'
			size_hint: .80,1
		
			Label:
				text: 'Model'
		
		MenuBar:
		
<ViewScreen>:
	BoxLayout:
    	size: root.size
        pos: root.pos
    	orientation: 'horizontal'
		
		BoxLayout:
			orientation: 'horizontal'
			size_hint: .80,1
		
			Label:
				text: 'View'
		
		MenuBar:
	        
	        